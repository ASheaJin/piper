<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>订阅出版社</title>
    <script type="text/javascript" charset="utf-8"
            th:src="@{/toongine20190104.js}"></script>
    <script th:src="@{/layui/jquery.min.js}"></script>
    <script th:src="@{/layui/layui.js}"></script>
    <script type="text/javascript" th:src="@{/common.js}"></script>
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
</head>
<body class="layui-layout-body">
<script type="text/javascript" th:inline="javascript">
    var userId = [[${userId}]];
    toongine.user.getUserInfo({
        callback: function (res) {
            userId = res.data.myTmail;
        }
    })

    /**
     * 保存标签
     */
    function addSub() {
        var publishTemail = document.getElementById('publishTemail').value;
        console.log("res:----------------- ");
        $.ajax({
            type: "POST",
            data: {
                userId: userId,
                publishTemail: publishTemail
            },
            url: "/publish/subscribe",
            dataType: "json",
            success: function (res) {
                console.log(res.code);
                alert(res.msg);
                if (res.code == 200) {
                    toongine.app.shutdown({
                        callback: function (res) {
                            console.log('res：' + res.code)
                        }
                    })
                }
            }
        });
    }
</script>


<div>
    <div data-th-replace="~{layout :: header}"></div>
    <div style="width: 100% ;color:white">
        <!-- 内容主体区域 -->
        <br/>
        <div>
            <form id="searchFrom" class="layui-form layui-form-pane" method="post">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <input id="publishTemail" name="publishTemail" placeholder="请输入出版社邮箱" class="layui-input"
                               maxlength="30">
                    </div>
                    <button type="button" style="float:right ;margin-right:10px;background-color: #aa7700" class="layui-btn" onclick="addSub()">
                        订阅
                    </button>
                    <!--<a class="layui-btn" style="right: 20px;position: absolute;" href="javascript:void(0)" onclick="add()">新增</a>-->
                </div>
            </form>
        </div>

    </div>

    <!--<div class="layui-footer">-->
    <!-- 底部固定区域 -->

</div>
</div>


</body>

</html>