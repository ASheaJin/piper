(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40e43ff9"],{"14eb":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.total>10?a("el-pagination",{staticClass:"page",attrs:{background:"",layout:"prev, pager, next",total:Number(t.total),"current-page":t.pageNo},on:{"current-change":t.currentChange}}):t._e()},i=[],o={props:["total","pageNo"],methods:{currentChange:function(t){this.$emit("togglePages",t)}}},n=o,l=(a("5645"),a("17cc")),r=Object(l["a"])(n,s,i,!1,null,"ac09ad2c",null);e["a"]=r.exports},"21a5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"baseTop"},[a("el-input",{staticClass:"itemInput",attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.postData.keyword,callback:function(e){t.$set(t.postData,"keyword",e)},expression:"postData.keyword"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.subcriptionList}},[a("el-table-column",{attrs:{prop:"userId",label:"用户名"}}),a("el-table-column",{attrs:{prop:"publisherId",width:"180",label:"出版社Id"}}),a("el-table-column",{attrs:{prop:"subscriptionId",label:"订阅Id",width:"180"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"添加",visible:t.isShowAddDialog,width:"50%","before-close":t.cancel},on:{"update:visible":function(e){t.isShowAddDialog=e}}},[a("div",{staticClass:"addItem"},[a("span",[t._v("用户Id：")]),a("el-input",{staticClass:"itemInput",attrs:{placeholder:"请输入用户名",clearable:""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addSubcription}},[t._v("添 加")])],1)]),a("el-dialog",{attrs:{title:"删除",visible:t.isShowDeleteDialog,width:"30%","before-close":t.cancel},on:{"update:visible":function(e){t.isShowDeleteDialog=e}}},[t.itemData?a("span",[t._v("是否确认删除"),a("span",{staticClass:"tips"},[t._v(t._s(t.itemData.userId))]),t._v("用户订阅")]):t._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteItem}},[t._v("删 除")])],1)]),a("page",{attrs:{total:t.total,pageNo:t.postData.pageNo},on:{togglePages:t.togglePages}})],1)},i=[],o=a("eeb9"),n="/subcription/subscribe",l="/subcription/unsubscribe",r="/subcription/list";function c(t){return Object(o["a"])({method:"post",url:n,data:t})}function u(t){return Object(o["a"])({method:"post",url:l,data:t})}function d(t){return Object(o["a"])({method:"post",url:r,data:t})}var p=a("14eb"),h={components:{page:p["a"]},data:function(){return{itemData:null,userId:"",isShowDeleteDialog:!1,isShowAddDialog:!1,id:this.$route.params.id,postData:{keyword:"",pageNo:1,pageSize:"10",publisherId:""},total:"",subcriptionList:[]}},methods:{getData:function(){var t=this;this.postData.publisherId=this.id,d(this.postData).then(function(e){t.subcriptionList=e.list,t.total=e.total})},togglePages:function(t){this.postData.pageNo=t,this.getData(this.postData)},search:function(){this.postData.pageNo=1,this.getData(this.postData)},add:function(){this.userId="",this.formatData(),this.isShowAddDialog=!0},handleDelete:function(t){this.itemData=t,this.isShowDeleteDialog=!0},cancel:function(){this.isShowDeleteDialog=!1,this.isShowAddDialog=!1},deleteItem:function(){var t=this,e={userId:this.itemData.userId,publisherId:this.id};u(e).then(function(){t.formatData("删除成功","success"),t.getData()})},addSubcription:function(){var t=this;if(""!=this.userId){var e={publisherId:this.id,userId:this.userId};c(e).then(function(){t.isShowAddDialog=!1,t.formatData("添加成功","success"),t.getData()})}else this.$message({message:"请输入用户Id",type:"warning"})},formatData:function(t,e){this.$message({message:t,type:e}),this.isShowDeleteDialog=!1,this.isShowAddDialog=!1,this.postData.pageNo=1}},created:function(){this.getData()}},g=h,b=a("17cc"),f=Object(b["a"])(g,s,i,!1,null,"03800aa0",null);e["default"]=f.exports},5645:function(t,e,a){"use strict";var s=a("92cb"),i=a.n(s);i.a},"92cb":function(t,e,a){}}]);
//# sourceMappingURL=chunk-40e43ff9.2e15e788.js.map