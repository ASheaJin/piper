(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a0fcab4"],{"14eb":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.total>10?s("el-pagination",{staticClass:"page",attrs:{background:"",layout:"prev, pager, next",total:Number(e.total),"current-page":e.pageNo},on:{"current-change":e.currentChange}}):e._e()},i=[],l={props:["total","pageNo"],methods:{currentChange:function(e){this.$emit("togglePages",e)}}},n=l,o=(s("5645"),s("2877")),r=Object(o["a"])(n,a,i,!1,null,"ac09ad2c",null);t["a"]=r.exports},"42ba":function(e,t,s){"use strict";s.d(t,"a",function(){return r}),s.d(t,"b",function(){return c}),s.d(t,"c",function(){return p}),s.d(t,"d",function(){return u});var a=s("eeb9"),i="/recommend/contentAdd",l="/recommend/contentDelete",n="/recommend/publisherAdd",o="/recommend/publisherDelete";function r(e){return Object(a["a"])({method:"post",url:i,data:e})}function c(e){return Object(a["a"])({method:"post",url:l,data:e})}function p(e){return Object(a["a"])({method:"post",url:n,data:e})}function u(e){return Object(a["a"])({method:"post",url:o,data:e})}},5645:function(e,t,s){"use strict";var a=s("b620"),i=s.n(a);i.a},"8e0e":function(e,t,s){},b620:function(e,t,s){},ca49:function(e,t,s){"use strict";var a=s("8e0e"),i=s.n(a);i.a},f563:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"baseTop"},[s("div",[s("slelect-common",{attrs:{publisherTypeList:e.publisherTypeList},on:{togglePublisherType:e.togglePublisherType}}),s("el-input",{staticClass:"serchInput itemInput",attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.postData.keyword,callback:function(t){e.$set(e.postData,"keyword",t)},expression:"postData.keyword"}}),s("el-select",{staticClass:"itemInput",attrs:{clearable:"",placeholder:"请选择"},on:{change:e.isRecommend},model:{value:e.postData.hasRecommend,callback:function(t){e.$set(e.postData,"hasRecommend",t)},expression:"postData.hasRecommend"}},[s("el-option",{attrs:{label:"已推荐",value:"1"}}),s("el-option",{attrs:{label:"未推荐",value:"0"}})],1)],1),s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加")])],1),s("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.publisherList}},[s("el-table-column",{attrs:{prop:"name",label:"出版社名称"}}),s("el-table-column",{attrs:{prop:"piperType",width:"180",label:"出版社类型"}}),s("el-table-column",{attrs:{prop:"ptemail",label:"秘邮地址",width:"180"}}),s("el-table-column",{attrs:{label:"操作",width:"350",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.checkContent(t.row)}}},[e._v("查看内容")]),s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.check(t.row)}}},[e._v("查看订阅")]),s("el-button",{attrs:{size:"mini",type:1==t.row.hasRecommend?"warning":"primary"},on:{click:function(s){return e.recommendItem(t.row,t.$index)}}},[e._v(e._s(1==t.row.hasRecommend?"取消推荐":"推荐"))]),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),s("el-dialog",{attrs:{title:"删除",visible:e.isShowDeleteDialog,width:"30%","before-close":e.cancel},on:{"update:visible":function(t){e.isShowDeleteDialog=t}}},[e.itemData?s("span",[e._v("是否确认删除"),s("span",{staticClass:"tips"},[e._v(e._s(e.itemData.name))]),e._v("出版社")]):e._e(),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancel}},[e._v("取 消")]),s("el-button",{attrs:{type:"danger"},on:{click:e.deleteItem}},[e._v("删 除")])],1)]),s("el-dialog",{attrs:{title:"添加",visible:e.isShowAddDialog,width:"50%","before-close":e.cancel},on:{"update:visible":function(t){e.isShowAddDialog=t}}},[s("div",{staticClass:"addItem"},[s("span",[e._v("出版社类型:")]),s("slelect-common",{attrs:{publisherTypeList:e.publisherTypeList,type:!0},on:{togglePublisherType:e.togglePublisherType}})],1),s("div",{staticClass:"addItem"},[s("span",[e._v("出版社名称：")]),s("el-input",{staticClass:"itemInput",attrs:{placeholder:"请输入出版社名称",clearable:""},model:{value:e.publisherName,callback:function(t){e.publisherName=t},expression:"publisherName"}})],1),s("div",{staticClass:"addItem"},[s("span",[e._v("出版社邮箱：")]),s("el-input",{staticClass:"itemInput",attrs:{placeholder:"请输入出版社邮箱",clearable:""},model:{value:e.publisherMail,callback:function(t){e.publisherMail=t},expression:"publisherMail"}})],1),s("div",{staticClass:"addItem"},[s("span",[e._v("创建人邮箱：")]),s("el-input",{staticClass:"itemInput",attrs:{placeholder:"请输入创建人邮箱",clearable:""},model:{value:e.publisherUserId,callback:function(t){e.publisherUserId=t},expression:"publisherUserId"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancel}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.addPublisher}},[e._v("添 加")])],1)]),s("page",{attrs:{total:e.total,pageNo:e.postData.pageNo},on:{togglePages:e.togglePages}})],1)},i=[],l=s("eeb9"),n="/publisher/add",o="/publisher/delete",r="/publisher/list",c="/publisher/getPiperType";function p(e){return Object(l["a"])({method:"post",url:n,data:e})}function u(e){return Object(l["a"])({method:"post",url:o,data:e})}function h(e){return Object(l["a"])({method:"post",url:r,data:e})}function d(){return Object(l["a"])({method:"post",url:c})}var b=s("42ba"),m=s("14eb"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-select",{staticClass:"itemInput",attrs:{placeholder:"请选择",clearable:""},on:{change:e.togglePublisherType},model:{value:e.publisherType,callback:function(t){e.publisherType=t},expression:"publisherType"}},e._l(e.publisherTypeList,function(e){return s("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)},f=[],y={data:function(){return{publisherType:""}},props:["publisherTypeList","type"],methods:{togglePublisherType:function(){this.$emit("togglePublisherType",this.publisherType,this.type)}}},D=y,v=s("2877"),w=Object(v["a"])(D,g,f,!1,null,"4d8bda8a",null),k=w.exports,T={data:function(){return{publisherUserId:"",publisherName:"",publisherMail:"",itemData:null,isShowAddDialog:!1,isShowDeleteDialog:!1,postData:{keyword:"",pageNo:1,pageSize:10,piperType:0,hasRecommend:""},total:"",publisherType:"",publisherTypeList:[],publisherList:[]}},methods:{isRecommend:function(){this.postData.pageNo=1,this.getList(this.postData)},getList:function(e){var t=this;h(e).then(function(e){t.publisherList=e.list,t.total=e.total})},togglePages:function(e){this.postData.pageNo=e,this.getList(this.postData)},search:function(){this.postData.pageNo=1,this.getList(this.postData)},cancel:function(){this.isShowAddDialog=!1,this.isShowDeleteDialog=!1},add:function(){this.publisherName="",this.publisherMail="",this.postData.piperType=0,this.publisherUserId="",this.isShowAddDialog=!0},handleDelete:function(e){this.itemData=e,this.isShowDeleteDialog=!0},deleteItem:function(){var e=this,t={publisherId:this.itemData.publisherId};u(t).then(function(){e.formatData("删除成功","success"),e.getList(e.postData)})},addPublisher:function(){var e=this;if(0!=this.postData.piperType)if(""!=this.publisherName)if(""!=this.publisherMail)if(""!=this.publisherUserId){var t={piperType:this.postData.piperType,publishMail:this.publisherMail,publishName:this.publisherName,userId:this.publisherUserId};p(t).then(function(){e.formatData("添加出版社成功","success")}).catch(function(){e.formatData("添加出版社成功","success")})}else this.$message({message:"请输入创建人邮箱",type:"warning"});else this.$message({message:"请输入出版社邮箱",type:"warning"});else this.$message({message:"请输入出版社名称",type:"warning"});else this.$message({message:"请选择出版社类型",type:"warning"})},check:function(e){this.$router.push({path:"/subcription/".concat(e.publisherId)})},checkContent:function(e){this.$router.push({path:"/content/".concat(e.publisherId)})},togglePublisherType:function(e,t){this.postData.piperType=e,this.postData.pageNo=1,t||this.getList(this.postData)},recommendItem:function(e,t){var s=this;0==e.hasRecommend?Object(b["c"])({publisherId:e.publisherId}).then(function(){s.publisherList[t].hasRecommend=1}):Object(b["d"])({reid:e.publisherId}).then(function(){s.publisherList[t].hasRecommend=0})},formatData:function(e,t){this.publisherName="",this.publisherMail="",this.postData.piperType=0,this.publisherUserId="",this.$message({message:e,type:t}),this.isShowDeleteDialog=!1,this.isShowAddDialog=!1,this.postData.pageNo=1}},created:function(){var e=this;this.getList(this.postData),d().then(function(t){e.publisherTypeList=t})},components:{page:m["a"],slelectCommon:k}},I=T,_=(s("ca49"),Object(v["a"])(I,a,i,!1,null,"4ccb4724",null));t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-7a0fcab4.a528817e.js.map