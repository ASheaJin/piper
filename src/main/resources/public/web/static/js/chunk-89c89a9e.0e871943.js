(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89c89a9e"],{"0eb4":function(e,t,n){"use strict";var i=n("fa2d"),o=n.n(i);o.a},"2e3a":function(e,t,n){"use strict";var i=n("60e8"),o=n.n(i);o.a},3467:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-upload-images"},[i("div",{staticClass:"v-upload-images__con"},[e._l(e.imgList,function(t,o){return t.src||t.url?i("div",{key:o,staticClass:"v-upload-images__frm"},[i("div",{staticClass:"v-upload-images__img",style:{backgroundImage:"url("+t.url+")",backgroundSize:"cover"}}),t.url?e._e():i("div",{staticClass:"v-upload-images__loading"},[i("v-spinner",{attrs:{color:"#fff",type:"fading-circle"}})],1),i("div",{staticClass:"v-upload-images__del",on:{click:function(t){return t.stopPropagation(),e.delImage(o)}}},[i("img",{attrs:{src:n("6740"),alt:""}})])]):e._e()}),e.imgList.length<e.max?i("div",{key:"addBtn",staticClass:"v-upload-images__frm v-upload-images__btn",on:{click:e.uploadImage}},[i("div",{staticClass:"v-upload-images__img icon"})]):e._e()],2)])},o=[],s=(n("612f"),n("34c6")),a=(n("b06f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"v-spinner"},[n(e.spinner,{tag:"component"})],1)}),r=[],c=(n("48fb"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-spinner__snake",style:{"border-top-color":"transparent","border-right-color":e.spinnerColor,"border-left-color":e.spinnerColor,"border-bottom-color":e.spinnerColor}})}),u=[],l={name:"snake",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}}},d=l,p=(n("2e3a"),n("17cc")),f=Object(p["a"])(d,c,u,!1,null,null,null),g=f.exports,h=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-spinner__triple-bounce"},[n("div",{staticClass:"bounce1"}),n("div",{staticClass:"bounce2"}),n("div",{staticClass:"bounce3"})])}],v={name:"triple-bounce",props:{size:Number,color:String},computed:{bounceStyle:function(){return{backgroundColor:this.spinnerColor}}}},y=v,b=(n("bd16"),Object(p["a"])(y,h,m,!1,null,null,null)),A=b.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["v-spinner__fading-circle circle-color-"+e._uid]},e._l(12,function(e){return n("div",{staticClass:"circle",class:["is-circle"+e]})}),0)},S=[],T={name:"fading-circle",props:{size:Number,color:String},computed:{spinnerColor:function(){return this.color||this.$parent.color||"#007AFF"}},created:function(){if(!this.$isServer){this.styleNode=document.createElement("style");var e=".circle-color-".concat(this._uid," > div::before { background-color: ").concat(this.spinnerColor,"; }");this.styleNode.type="text/css",this.styleNode.rel="stylesheet",this.styleNode.title="fading circle style",document.getElementsByTagName("head")[0].appendChild(this.styleNode),this.styleNode.appendChild(document.createTextNode(e))}},destroyed:function(){this.styleNode&&this.styleNode.parentNode.removeChild(this.styleNode)}},_=T,C=(n("cb49"),Object(p["a"])(_,w,S,!1,null,null,null)),L=C.exports,x=["snake","triple-bounce","fading-circle"],E=function(e){return"[object Number]"==={}.toString.call(e)?(x.length<=e&&(e=0),x[e]):(-1===x.indexOf(e)&&(e=x[0]),e)},k={name:"v-spinner",computed:{spinner:function(){return"spinner-".concat(E(this.type))}},components:{SpinnerSnake:g,SpinnerTripleBounce:A,SpinnerFadingCircle:L},props:{type:{default:0},size:{type:Number,default:28},color:{type:String,default:"#ccc"}}},N=k,O=Object(p["a"])(N,a,r,!1,null,null,null),B=O.exports,I=(n("5f33"),n("c9ee")),R=void 0,$=function(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.dataType=(e.dataType||"text").toUpperCase(),e.cache=e.cache||"true ",e.timeout=parseInt(e.timeout)||1e4;var t,n=e.data,i=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,o={},s=function(e,t){o[e.toLowerCase()]=[e,t]},a=function(){for(var e in t.setRequestHeader=s,o)r.apply(t,o[e])};if(t=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),"TEXT"!==e.dataType)try{t.responseType=e.dataType}catch(c){console.log("ajax不支持responseType")}e.cache||t.setRequestHeader("If-Modified-Since","0"),t.onreadystatechange=function(){if(4===t.readyState){e.complete&&e.complete.call(this,t);var n=t.responseText;if(t.status>=200&&t.status<300||304===t.status||0===t.status&&"file:"===i&&"function"===typeof e.success){var o=e.dataType||t.getResponseHeader("content-type");try{"SCRIPT"===o?console.error("eval can be harmful! ",n):"XML"===o?n=t.responseXML:"JSON"===o&&(n=JSON.parse(n))}catch(c){console.log("error")}e.success&&e.success(n,t.status)}else t.status>=400&&t.status<500?e.error&&e.error(t,t.status):(t.status,e.error&&e.error(t,t.status))}};var r=t.setRequestHeader;s("Accept","*/*"),"GET"===e.type?(t.open("GET",e.url+"?"+n,!0),e.beforeSend&&e.beforeSend.call(R,e,s),a(),t.send(null)):"POST"===e.type&&(t.open("POST",e.url,!0),s("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),e.beforeSend&&e.beforeSend.call(R,e,s),a(),t.send(n))},z=function(e,t,n,i){if(!e||!t||!n)return!1;var o=new Date+3e5;function s(){var r=Date.now();Object(I["a"])("media","chooseImage",e,function(e){console.warn(e,"999999999");var i=[],o=[];if("-1"===e.code||-1===e.code)return t&&t("cancel"),!1;if(e.data){var s,r,c,u=e.data.length,l=new window.Image;for(o=e.data,s=0;s<u;s++)r=e.data[s],l.src="data:image/"+r.imageType+";base64,"+r.base64,c={size:r.size,imageType:r.imageType,src:l.src,id:(new Date).getTime()+Math.random(),width:r.width,height:r.height},i.push(c)}t&&t(i),a(i,o,n)},function(){var e=Date.now();if(e<r+1e4||e>o)return i&&i();setTimeout(s,1e3)})}function a(e,t,n){$({url:"http://qiniu.systoon.com/getToken.php",success:function(o){var s,a=e.length;for(s=0;s<a;s++)r(t[s],o,e[s].id,n,i)},error:function(){return i&&i(e)}})}function r(e,t,n,o){$({url:"http://upload.qiniu.com/putb64/"+e.size,type:"POST",data:e.base64,beforeSend:function(e,n){n("Content-Type","application/octet-stream"),n("Authorization","UpToken "+t)},success:function(e){var t={url:"http://apr.qiniu.toon.mobi/"+JSON.parse(e).key,id:n};o(t)},error:function(){return i&&i(n)}})}s()},M={components:{vSpinner:B},props:{max:{type:Number,default:9},value:{type:Array,default:function(){return[]}},desc:{type:String,default:""},classes:{type:String,default:""},uploaded:{type:Boolean,default:!0},lazyTag:{type:Boolean,default:!0}},data:function(){return{showTag:!this.lazyTag,imgList:this.value,uploadedStatus:this.uploaded}},computed:{},watch:{value:function(){this.imgList=this.value,this.imgList.length<this.max?this.showTag=!0:this.showTag=!1},lazyTag:function(e){this.showTag=!this.lazyTag},imgList:function(e){this.$emit("input",e)},uploadedStatus:function(e){this.$emit("handle-uploaded-status",e)}},methods:{uploadImage:function(){var e=this;if(this.imgList.length>=this.max)this.$toast("您最多只能选择".concat(this.max,"张"));else{var t=this.max-this.imgList.length,n={sourceType:2,count:t};z(n,function(t){var n,i;if("cancel"!==t)for(e.uploadedStatus=!1,n=0,i=t.length;n<i;n++)t[n].url="",e.imgList.length<e.max&&e.imgList.push(t[n]);else e.checkStatus()},function(t){var n,i;for(n=0,i=e.imgList.length;n<i;n++)if(t.id===e.imgList[n].id){e.imgList[n].url=t.url;break}e.checkStatus()},function(t){var n,i,o,a,r;if(e.checkStatus(),t){if("object"===Object(s["a"])(t))for(n=0,i=e.imgList.length;n<i;n++)for(o=0,a=t.length;o<a;o++)e.imgList[n].id===t[o].id&&(e.imgList.splice(n,1),r=document.getElementById(t[o].id),r.parentNode.removeChild(r));else if("number"===typeof t)for(n=0,i=e.imgList.length;n<i;n++)e.imgList[n].id===t&&(e.imgList.splice(n,1),r=document.getElementById(t),r.parentNode.removeChild(r))}else;})}},checkStatus:function(){for(var e=!0,t=0,n=this.imgList.length;t<n;t++)this.imgList[t].url||(e=!1);e?(this.uploadedStatus=!0,this.$emit("handle-uploaded-status",!0)):(this.uploadedStatus=!1,this.$emit("handle-uploaded-status",!1))},delImage:function(e){this.imgList.splice(e,1)},goViewer:function(e){var t=this;this.$root.img=[],this.imgList.forEach(function(e,n){t.$root.img.push(e.src)}),this.$router.push({name:"viewer",query:{idx:e}})}}},P=M,U=(n("0eb4"),Object(p["a"])(P,i,o,!1,null,null,null));t["a"]=U.exports},"48fb":function(e,t,n){"use strict";n("66f5");var i=n("4d65"),o=n("7fe4"),s=n("3a0f"),a="toString",r=/./[a],c=function(e){n("7f00")(RegExp.prototype,a,e,!0)};n("201d")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)}):r.name!=a&&c(function(){return r.call(this)})},"5f33":function(e,t,n){var i=n("4839"),o=n("d62f"),s=n("694f").f,a=n("62af").f,r=n("d635"),c=n("7fe4"),u=i.RegExp,l=u,d=u.prototype,p=/a/g,f=/a/g,g=new u(p)!==p;if(n("3a0f")&&(!g||n("201d")(function(){return f[n("f3ae")("match")]=!1,u(p)!=p||u(f)==f||"/a/i"!=u(p,"i")}))){u=function(e,t){var n=this instanceof u,i=r(e),s=void 0===t;return!n&&i&&e.constructor===u&&s?e:o(g?new l(i&&!s?e.source:e,t):l((i=e instanceof u)?e.source:e,i&&s?c.call(e):t),n?this:d,u)};for(var h=function(e){e in u||s(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},m=a(l),v=0;m.length>v;)h(m[v++]);d.constructor=u,u.prototype=d,n("7f00")(i,"RegExp",u)}n("4fd1")("RegExp")},"60e8":function(e,t,n){},"66f5":function(e,t,n){n("3a0f")&&"g"!=/./g.flags&&n("694f").f(RegExp.prototype,"flags",{configurable:!0,get:n("7fe4")})},6740:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkBAMAAAATLoWrAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAqUExURQAAADo6OvHx8f39/ZiYmMvLy93d3TExMampqfr6+ry8vPDw8Dw8PP///5/WLEgAAAANdFJOU01b4PuErcFYjvOe3lwFMcnjAAAAg0lEQVQoz2NgGMSAHcYogAtVboTQLGZwIe5LAmDa+RZciFFXEazINgBhmBBYmfNVJPPBylAUQZShKAIrQ1MEUtZ8Fc21jLp3A9B90HtTAE2ExXauIpqQ81WhSwJoigKgXkBSBPMCkiK4T5EUoSqDOhxZWTHU4YeuwYXYFkC9kDGYkwMAPXcdXes1cS8AAAAASUVORK5CYII="},a974:function(e,t,n){},bd16:function(e,t,n){"use strict";var i=n("a974"),o=n.n(i);o.a},c070:function(e,t,n){},cb49:function(e,t,n){"use strict";var i=n("c070"),o=n.n(i);o.a},fa2d:function(e,t,n){}}]);
//# sourceMappingURL=chunk-89c89a9e.0e871943.js.map