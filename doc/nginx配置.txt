由于piper应用的域名使用了子路径的形式：http://application.t.email/piper
在nginx的配置上要注意配置：
    location /piper/ {
          proxy_pass http://piper;
          proxy_set_header Host             $host;
          proxy_set_header X-Real-IP        $remote_addr;
          proxy_set_header X-Forwarded-For  $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto  $scheme;
          proxy_redirect http:// $scheme://;
    }

proxy_pass 一行，最后不要加斜杠，因为应用本身配置了 server.servlet.context-path=/piper
proxy_redirect 一行，是解决代码中有重定向时出现的问题，如果没有此行，会造成 https 被重定向到 http 的情况