(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e5e0277"],{"1e63":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"pagePublish",staticClass:"page-publish"},[t.isShowContent?i("div",{staticClass:"page page-publish-content"},[i("div",{staticClass:"publish-header bg"},[i("ul",[i("li",[i("p",{staticClass:"key"},[t._v(t._s(t.$t("publish.name")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{maxlength:"50",type:"text",placeholder:t.$t("publish.inputR")},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),i("li",{staticClass:"right-bg",on:{click:function(e){return t.goPage("industry")}}},[i("p",{staticClass:"key"},[t._v(t._s(t.$t("publish.industry")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.industry.name,expression:"industry.name"}],attrs:{type:"text",placeholder:t.placeholder,readonly:""},domProps:{value:t.industry.name},on:{input:function(e){e.target.composing||t.$set(t.industry,"name",e.target.value)}}})]),i("li",{staticClass:"right-bg",on:{click:function(e){return t.goPage("needs")}}},[i("p",{staticClass:"key"},[t._v(t._s(t.$t("publish.demand")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.needs.name,expression:"needs.name"}],attrs:{type:"text",placeholder:t.placeholder,readonly:""},domProps:{value:t.needs.name},on:{input:function(e){e.target.composing||t.$set(t.needs,"name",e.target.value)}}})]),i("li",{staticClass:"right-bg",on:{click:function(e){return t.chooseItem("edit")}}},[i("p",{staticClass:"key key-bg",on:{click:function(e){e.stopPropagation(),t.toastShow?t.toastShow=!1:t.toastShow=!0}}},[t._v(t._s(t.$t("publish.period")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"text",placeholder:t.placeholder,readonly:""},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t.toastShow?i("div",{staticClass:"question"},[i("img",{attrs:{src:s("df68"),alt:""}}),t._v("\n                        "+t._s(t.$t("publish.approvementleft"))+t._s(t.effectDay)+t._s(t.$t("publish.approvementrignt"))+"\n                    ")]):t._e()])])]),i("div",{staticClass:"publish-serve bg"},[i("h3",[t._v(t._s(t.$t("publish.product")))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.serve,expression:"serve"}],ref:"serve",attrs:{maxlength:"100",type:"text",placeholder:t.$t("publish.introduction")},domProps:{value:t.serve},on:{input:function(e){e.target.composing||(t.serve=e.target.value)}}}),i("p",[t._v(t._s(t.serve.length)+"/100")])]),i("div",{staticClass:"publish-serve publish-infos bg"},[i("h3",[t._v(t._s(t.$t("publish.detail")))]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.details,expression:"details"}],ref:"details",attrs:{type:"text",placeholder:t.$t("publish.rIntroduction")},domProps:{value:t.details},on:{input:function(e){e.target.composing||(t.details=e.target.value)}}}),i("v-upload-img",{attrs:{max:t.maxImglength,desc:"这里可传入备注说明...","lazy-tag":!0},on:{"handle-uploaded-status":t.handleUploadedStatus},model:{value:t.imgList,callback:function(e){t.imgList=e},expression:"imgList"}}),i("p",[t._v(t._s(t.details.length)+"/2000")])],1),i("div",{staticClass:"publish-serve bg publish-logo"},[i("h3",[t._v(t._s(t.$t("publish.logo")))]),i("v-upload-img",{attrs:{max:1,desc:"这里可传入备注说明...","lazy-tag":!0},on:{"handle-uploaded-status":t.UploadedStatus},model:{value:t.logo,callback:function(e){t.logo=e},expression:"logo"}})],1),i("div",{staticClass:"publish-header bg publish-address"},[i("ul",[i("li",{staticClass:"right-bg",on:{click:function(e){return t.goPage("city")}}},[i("p",{staticClass:"key"},[t._v(t._s(t.$t("publish.location")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.city.name,expression:"city.name"}],attrs:{type:"text",placeholder:t.placeholder,readonly:""},domProps:{value:t.city.name},on:{input:function(e){e.target.composing||t.$set(t.city,"name",e.target.value)}}})]),i("li",{staticClass:"right-bg",on:{click:function(e){return t.goPage("email")}}},[i("p",{staticClass:"key"},[t._v(t._s(t.$t("publish.Email")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.connector,expression:"connector"}],class:{"input-error":!t.emailAddress},attrs:{type:"text",placeholder:"请选择（必选）",readonly:""},domProps:{value:t.connector},on:{input:function(e){e.target.composing||(t.connector=e.target.value)}}}),t.emailAddress?t._e():i("div",{staticClass:"emait-toast"},[t._v("\n                        "+t._s(t.$t("publish.toastE"))+"\n                    ")])])])])]):t._e(),i("v-picker",{ref:"edit",attrs:{slots:t.editSlot,"visible-item-count":7},on:{confirm:t.editChange}}),i("div",{staticClass:"page-publish-btn bg"},[i("p",{class:{"btn-status":t.btnStatus},on:{click:t.publish}},[t._v(t._s(t.$t("title.publish")))])])],1)},a=[],n=(s("f91a"),s("612f"),s("ea65"),s("3a23"),s("8724")),o=s("3467"),l=s("fe0d"),r=s("c9ee"),u=s("5f4d"),c=s("9f30"),h=s("9c2f"),d={name:"publish",components:{vUploadImg:o["a"],vPicker:l["a"]},data:function(){return{inputServeLength:0,isShowContent:!0,placeholder:this.$t("publish.required"),userId:"",title:"",industry:"",needs:"",effectDay:15,connector:"",serve:"",city:"",details:"",imgList:[],maxImglength:9,logo:[{url:"http://apr.qiniu.toon.mobi/Fk99vAT9VkKXLG1MtDs97EHBIkRK"}],editSlot:[{flex:1,values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],className:"slot1"}],time:"15"+this.$t("publish.day"),imgLishStatus:!0,logoStatus:!0,toastShow:!1}},activated:function(){var t=this;this.isShowContent=!0,this.$router.direct()?(this.$router.setTitle(this.$t("title.publish")),this.title="",this.industry="",this.industry="",this.needs="",this.effectDay=15,this.connector="",this.serve="",this.city="",this.details="",this.imgList=[],this.maxImglength=9,this.logo=[{url:"http://apr.qiniu.toon.mobi/Fk99vAT9VkKXLG1MtDs97EHBIkRK"}],this.time="15"+this.$t("publish.day"),this.imgLishStatus=!0,this.logoStatus=!0,this.toastShow=!1,this.userId=this.$route.query.userId,this.connector=this.$route.query.userId):(this.$root.industry&&(this.industry=this.$root.industry,this.$root.industry=null),this.$root.needs&&(this.needs=this.$root.needs,this.$root.needs=null),this.$root.city&&(this.city=this.$root.city,this.$root.city=null)),this.$nextTick(function(){Object(n["a"])(t.$refs.serve),Object(n["a"])(t.$refs.details)})},deactivated:function(){this.isShowContent=!1},mounted:function(){},watch:{serve:function(t){t.length>100&&(this.serve=t.substr(0,100))},details:function(t){console.warn(t,t.length),t.length>2e3&&(this.details=t.substr(0,2e3))}},computed:{btnStatus:function(){return!!(this.title&&this.industry.name&&this.needs.name&&this.details&&this.city&&this.imgLishStatus&&this.logoStatus&&this.emailAddress)},emailAddress:function(){var t=this.userId.split("@")[1],e=this.connector.split("@")[1];return t===e}},beforeRouteLeave:function(t,e,s){var i=this;s(!1),"home"===t.name||"personal"===t.name||"edit-account"===t.name?(this.$refs.pagePublish.style.height="100%",h["a"].confirm("",this.$t("publish.leaveToast"),{confirmText:this.$t("publish.leave"),cancelText:this.$t("publish.noLeave")}).then(function(t){i.$refs.pagePublish.removeAttribute("style"),s(!0)}).catch(function(t){i.$refs.pagePublish.removeAttribute("style")})):s(!0)},methods:{editChange:function(t){t?(this.time=t+this.$t("publish.day"),this.effectDay=t):(this.time=15+this.$t("publish.day"),this.effectDay=15)},handleUploadedStatus:function(t){this.imgLishStatus=t},UploadedStatus:function(t){this.logoStatus=t},goPage:function(t){var e=this;"industry"===t?this.$router.push({name:"industry"}):"needs"===t?this.$router.push({name:"needs"}):"email"===t?Object(r["a"])("chat","chooseContact",{type:1},function(t){e.connector=t.data[0].temail},function(t){this.$toast.center(t)}):"city"===t&&this.$router.push({name:"city"})},chooseItem:function(t){this.$refs[t].open()},publish:function(){var t={},e=this,s=[];t.areaEx=JSON.stringify(e.city),t.connector=e.connector,e.imgList.forEach(function(t){s.push({url:t.url})}),t.description=e.details,t.descrimgs=JSON.stringify(s),t.effectDay=e.effectDay,e.logo.length?t.iconurl=e.logo[0].url:t.iconurl="",t.industryType=e.industry.code,t.products=e.serve,t.requestType=e.needs.code,t.title=e.title,t.userId=e.$route.query.userId,t.istrust=1,e.btnStatus&&(e.$refs.pagePublish.style.height="100%",h["a"].confirm("",e.$t("publish.offline"),{confirmText:e.$t("btn.publish"),cancelText:e.$t("btn.abolish")}).then(function(s){Object(u["b"])(Object(c["a"])("postSave"),t,{loading:!0}).then(function(t){e.$refs.pagePublish.removeAttribute("style"),e.isShowContent=!1,e.$router.replace({name:"details",query:{postId:t}})}).catch(function(t){e.$refs.pagePublish.removeAttribute("style"),e.$toast.center(t)})}).catch(function(t){e.$refs.pagePublish.removeAttribute("style")}))}}},p=d,m=(s("3373"),s("17cc")),g=Object(m["a"])(p,i,a,!1,null,null,null);e["default"]=g.exports},3373:function(t,e,s){"use strict";var i=s("8b0a"),a=s.n(i);a.a},"8b0a":function(t,e,s){}}]);
//# sourceMappingURL=chunk-7e5e0277.36db3d09.js.map